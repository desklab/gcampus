{% extends "gcampuscore/base.html" %}
{% load i18n static %}
{% block body_class %}bg-light{% endblock %}
{% block content %}
    <div class="container">
        <div class="py-5 text-center">
            {% if token_type|lower == "access" %}
                <h2> {% blocktranslate %}Verify with a access key{% endblocktranslate %}</h2>
            {% else %}
                <h2> {% blocktranslate %}Verify with a course token{% endblocktranslate %}</h2>
            {% endif %}
        </div>
        {% if set_token_type|lower == "access" %}
            {% if "token" in request.session %}
                <div class="py-5 text-center">
                    <h3> {% blocktranslate %}You are currently logged in with an access key{% endblocktranslate %}</h3>
                </div>
            {% endif %}
        {% elif set_token_type|lower == "course" %}
            <div class="py-5 text-center">
                {% if "token" in request.session %}
                    <h3> {% blocktranslate %}You are currently logged in with a course token{% endblocktranslate %}</h3>
                    </div>
                {% endif %}
        {% endif %}
        <div class="invalid-feedback">
            {{ form.non_field_errors }}
        </div>
        <form method="POST">
            <div class="row justify-content-center text-center">
                <div class="col-lg-4">
                    {% csrf_token %}
                    {# Token #}
                    {% with form.token as field %}
                <div class="mb-3">
                    {% include "gcampuscore/forms/components/label.html" with class="mb-2" %}
                    {{ field }}
                    {% if field.errors %}
                        <small class="text-danger">{{ field.errors }}</small>
                    {% endif %}
                </div>
            {% endwith %}
                {% comment %}
                    {% with form.token as field %}
                        <div class="mb-3">
                            {% include "gcampuscore/forms/widgets/input.html" with widget=field.subwidgets.0.data %}
                        </div>
                    {% endwith %}
                    {% endcomment %}
                </div>
                {% if not authenticated %}
                    <div class="col-lg-2">
                        <button class="btn btn-primary btn-lg">
                            {% translate "Confirm" %}
                        </button>
                    </div>
                {% else %}
                    <div class="button-box col-lg-12">
                        <a href="/logout" class="btn btn btn-danger" role="button">{% translate "Logout" %}</a>
                        <button class="btn btn-primary btn-lg">
                            {% translate "Log in with new Token" %}
                        </button>
                    </div>
                {% endif %}
            </div>
        </form>
    </div>
{% endblock %}
{% block extra_body %}
    <script type="text/javascript" src="{% static 'gcampuscore/js/autofocus.js' %}"></script>
{% endblock %}
